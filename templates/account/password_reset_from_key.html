{% extends "base_auth.html" %}
{% load static %}

{% block title %}Setează parolă nouă – Micu's Market{% endblock %}

{% block content %}
<div class="auth-container">
  <div class="auth-card">
    <div class="auth-header">
      <h1><i class="fas fa-key"></i> Resetează parola</h1>
      <p>Introdu o nouă parolă pentru contul tău.</p>
    </div>

    {% if token_fail %}
      <div class="alert alert-warning" style="margin-bottom:1rem">
        Linkul de resetare este invalid sau a expirat.
      </div>
      <a class="btn btn-primary" href="{% url 'account_reset_password' %}">Cere alt link</a>
    {% else %}
      <form method="post" action="{{ action_url|default:request.get_full_path }}">
        {% csrf_token %}
        {% if form.non_field_errors %}
          <div class="alert alert-danger">{{ form.non_field_errors }}</div>
        {% endif %}

        <div class="form-group">
          <label for="{{ form.password1.id_for_label }}">Parola nouă</label>
          {{ form.password1 }}
          {{ form.password1.errors }}
        </div>

        <div class="form-group">
          <label for="{{ form.password2.id_for_label }}">Confirmă parola</label>
          {{ form.password2 }}
          {{ form.password2.errors }}
        </div>

        <button type="submit" class="btn btn-primary btn-block">
          <i class="fas fa-save"></i> Salvează parola
        </button>
      </form>
    {% endif %}
  </div>
</div>
{% endblock %}
